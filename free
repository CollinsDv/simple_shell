#include <string.h>
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <stddef.h>

int main(void)
{
	size_t size, i;
	ssize_t char_num;
	char *ptr, *dup, *token, **malok;

	malok = NULL;
	ptr = NULL;
	token = NULL;
	dup = NULL;
	size = 0;
	while(1)
	{
		printf("$ ");

		char_num = getline(&ptr, &size, stdin);
		if (char_num < 0)
		{
			perror("stdin error");
			exit(-1);
		}
		printf("no. of char printed = %lu\n", char_num);
		printf("the chars are %s", ptr);

		dup = strdup(ptr);

		malok = malloc(sizeof(*malok) * 10);

		token = strtok(dup, " ");
		i = 0;
		while (token)
		{
			malok[i] = strdup(token);
			i++;

			token = strtok(NULL, " ");
		}
		malok[i] = NULL;
		i = 0;
		while (malok[i])
		{
			printf("%s\n", malok[i]);
			i++;
		}
		i = 0;
		while (malok[i])
		{
			free(malok[i]);
			i++;
		}
		free(malok);
		free(ptr);
		free(dup);

		dup = NULL;
		ptr = NULL;
		malok = NULL;
	}
	return (0);
}
